<?xml version="1.0"?><key>893DCA8B.C48C</key><triggers><d2d><trigger><id>1</id><parent>0</parent><name>My Programs</name><folder /><if></if><then></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>26</id><name>LaundryFan</name><parent>1</parent><if><and /><var id="1" type="2"><op>GT</op><val prec="0">0</val></var></if><then><cmd id="DON" node="43 57 73 1"></cmd><wait><minutes>10</minutes></wait><var id="1" type="2"><op>SUB=</op><val prec="0">1</val></var></then><else><cmd id="DOF" node="43 57 73 1"></cmd></else><comment>$PrepFanCount is incremented by 1 for each push of the switch. State variable triggers fan on for 10 minutes, then decrements $PrepFanCount, when $PrepFanCount hits 0 fan switched off.</comment></trigger></d2d><d2d><trigger><id>6</id><name>Vacation Morning</name><parent>37</parent><if><and /><schedule><at><time>20700</time></at></schedule></if><then><wait><minutes>33</minutes><random /></wait><cmd id="DON" node="38 AC 2B 1"></cmd><wait><minutes>8</minutes></wait><wait><seconds>38</seconds><random /></wait><cmd id="DON" node="3D 35 B6 1"></cmd><wait><minutes>3</minutes><random /></wait><cmd id="DOF" node="3D 35 B6 1"></cmd><wait><minutes>2</minutes></wait><cmd id="DOF" node="38 AC 2B 1"></cmd><cmd id="DON" node="50425"></cmd><wait><seconds>30</seconds><random /></wait><runif>31</runif><wait><minutes>6</minutes><random /></wait><cmd id="DON" node="53285"></cmd><wait><minutes>3</minutes></wait><cmd id="DOF" node="53285"></cmd><wait><minutes>2</minutes></wait><cmd id="DON" node="3C F6 59 1"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>31</id><name>Morning</name><parent>1</parent><if></if><then><cmd id="FAVORITE" node="n002_d4bee9e"><p id=""><val uom="25" prec="0">0</val></p></cmd><cmd id="SVOL" node="n002_d4bee9e"><p id=""><val uom="51" prec="0">25</val></p></cmd><cmd id="PARTY" node="n002_d4bee9e"></cmd><cmd id="DON" node="48613"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>8</id><name>Vacation Evening</name><parent>37</parent><if><and /><schedule><at><sunset>-1860</sunset></at></schedule></if><then><cmd id="DON" node="42 D0 3B 1"></cmd><wait><hours>1</hours><random /></wait><cmd id="DON" node="3C F6 59 1"><p id=""><val uom="51" prec="0">44</val></p></cmd><wait><hours>1</hours><minutes>11</minutes><seconds>38</seconds><random /></wait><cmd id="DOF" node="3C F6 59 1"></cmd><cmd id="DON" node="42 D0 3B 1"><p id=""><val uom="51" prec="0">33</val></p></cmd><cmd id="DOF" node="26067"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>44</id><name>PowerwallBackupOff</name><parent>38</parent><if><and /><status id="GV6" node="n003_2662707" op="IS"><val uom="25" prec="0">0</val></status><and /><var id="5" type="2"><op>IS</op><val prec="0">1</val></var></if><then><comment>Restore heat settings</comment><runthen>46</runthen><comment>Restore hot water circulation</comment><enable>22</enable><enable>21</enable><comment>Restore irrigation and water feature</comment><enable>16</enable><enable>10</enable><enable>15</enable><comment>Restore timers so variable update</comment><enable>17</enable><enable>20</enable><comment>Set PowerwallBackupActive variable</comment><var id="5" type="2"><op>EQ</op><val prec="0">0</val></var><comment>Set State variable so Alexa provides outage end notification</comment><var id="3" type="2"><op>EQ</op><val prec="0">1</val></var></then><else></else><comment>Actions to restore functions after grid power has been restabished</comment></trigger></d2d><d2d><trigger><id>45</id><name>RestoreGarageHeat</name><parent>38</parent><if><and /><var id="1" type="1"><op>IS</op><val prec="0">1</val></var><and /><var id="5" type="2"><op>IS</op><val prec="0">1</val></var><and /><status id="GV6" node="n003_2662707" op="IS"><val uom="25" prec="0">0</val></status></if><then><cmd id="CLIMD" node="50 59 A7 1"><p id=""><val uom="98" prec="0">1</val></p></cmd><cmd id="CLISPH" node="50 59 A7 1"><p id=""><var uom="14" type="1" id="2" /></p></cmd></then><else><cmd id="CLIMD" node="50 59 A7 1"><p id=""><val uom="98" prec="0">0</val></p></cmd></else><comment></comment></trigger></d2d><d2d><trigger><id>37</id><name>Vacation</name><parent>1</parent><folder /><if></if><then></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>34</id><name>LaundryFanIncrement</name><parent>1</parent><if><and /><control id="DON" node="43 57 73 1" op="IS"></control></if><then><var id="1" type="2"><op>ADD=</op><val prec="0">1</val></var></then><else></else><comment>Each time Laundry Fan switch is turned on add 10 minutes run time by incrementing $LaundryFanCount</comment></trigger></d2d><d2d><trigger><id>25</id><name>Hot water</name><parent>40</parent><if></if><then><var id="2" type="2"><op>ADD=</op><val prec="0">1</val></var><wait><minutes>30</minutes></wait><var id="2" type="2"><op>SUB=</op><val prec="0">1</val></var></then><else><var id="2" type="2"><op>SUB=</op><val prec="0">1</val></var></else><comment></comment></trigger></d2d><d2d><trigger><id>23</id><name>HeatValueGarage</name><parent>38</parent><if></if><then><var id="2" type="1"><op>EQ</op><status id="CLISPH" node="50 59 A7 1" uom="14"/></var></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>16</id><name>Water_feature_timer</name><parent>1</parent><if><or /><schedule><from><time>23400</time></from><to><sunset>0</sunset></to></schedule></if><then><enable>11</enable></then><else><disable>11</disable><cmd id="DOF" node="46 59 B9 1"></cmd></else><comment>Enables water feature program from 6:30AM to 9:00PM. Switches water feature off at 9PM in case it was on when program disabled.</comment></trigger></d2d><d2d><trigger><id>46</id><name>RestoreMainHeat</name><parent>38</parent><if></if><then><cmd id="CLIMD" node="44 87 96 1"><p id=""><var uom="98" type="1" id="3" /></p></cmd><cmd id="CLISPH" node="44 87 96 1"><p id=""><var uom="14" type="1" id="4" /></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>43</id><name>PowerwallBackupOn</name><parent>38</parent><if><and /><status id="GV6" node="n003_2662707" op="ISNOT"><val uom="25" prec="0">0</val></status></if><then><comment>Set State variable so Alexa provides outage notification</comment><var id="3" type="2"><op>EQ</op><val prec="0">0</val></var><comment>Set BackupActive variable</comment><var id="5" type="2"><op>EQ</op><val prec="0">1</val></var><var id="5" type="1"><op>ADD=</op><val prec="0">1</val></var><comment>Disable timers to avoid changing variable values until power restored </comment><disable>20</disable><disable>17</disable><disable>15</disable><disable>10</disable><comment>Turn off hot water circulating pump</comment><disable>22</disable><disable>21</disable><cmd id="DOF" node="46 BF B1 2"></cmd><comment>Turn kitchen island lights that flicker on powerwall</comment><cmd id="DOF" node="42 EF C5 1"></cmd><comment>Shut off irrigation and water feature</comment><disable>16</disable><disable>11</disable><cmd id="DOF" node="46 59 B9 1"></cmd><cmd id="DOF" node="46 59 B9 2"></cmd></then><else></else><comment>Power conservation actions to take when powerwall is suppying backup power.</comment></trigger></d2d><d2d><trigger><id>9</id><name>Front_day_off</name><parent>1</parent><if><and /><schedule><at><sunrise>-600</sunrise></at></schedule></if><then><cmd id="DOF" node="4527"></cmd><cmd id="DOF" node="43 57 8 1"></cmd><cmd id="DOF" node="53285"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>7</id><name>Vacation Night</name><parent>37</parent><if><and /><schedule><at><time>77520</time></at></schedule></if><then><cmd id="DON" node="38 8C 44 1"><p id=""><val uom="51" prec="0">25</val></p></cmd><wait><minutes>11</minutes><random /></wait><cmd id="DON" node="38 AC 2B 1"></cmd><wait><seconds>45</seconds><random /></wait><cmd id="DON" node="3D 35 B6 1"></cmd><wait><minutes>3</minutes><random /></wait><cmd id="DOF" node="3D 35 B6 1"></cmd><wait><minutes>8</minutes><random /></wait><cmd id="DOF" node="38 AC 2B 1"></cmd><wait><minutes>8</minutes><random /></wait></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>17</id><name>HeatChkTimer</name><parent>38</parent><if><and /><schedule><from><time>0</time></from><for><hours>24</hours></for></schedule></if><then><repeat><every><minutes>5</minutes></every></repeat><runthen>23</runthen><runthen>27</runthen></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>10</id><name>Garage_thermo_on</name><parent>38</parent><if><and /><status id="GV6" node="n003_2662707" op="IS"><val uom="25" prec="0">0</val></status><and /><paren><and /><paren><and /><status id="CLIMD" node="50 59 A7 1" op="ISNOT"><val uom="98" prec="0">1</val></status><and /><status id="ST" node="n010_temperature" op="LE"><val uom="17" prec="1">450</val></status></paren><or /><paren><and /><status id="CLIMD" node="50 59 A7 1" op="IS"><val uom="98" prec="0">1</val></status><and /><status id="CLISPH" node="50 59 A7 1" op="LE"><val uom="14" prec="0">40</val></status><and /><status id="ST" node="n010_temperature" op="LE"><val uom="17" prec="1">450</val></status></paren></paren></if><then><cmd id="CLIMD" node="50 59 A7 1"><p id=""><val uom="98" prec="0">1</val></p></cmd><cmd id="CLISPH" node="50 59 A7 1"><p id=""><val uom="14" prec="0">50</val></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>22</id><name>Hot water afternoon on</name><parent>40</parent><if><and /><schedule><at><time>59400</time></at></schedule></if><then><var id="2" type="2"><op>ADD=</op><val prec="0">1</val></var><wait><hours>3</hours></wait><var id="2" type="2"><op>SUB=</op><val prec="0">1</val></var></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>15</id><name>Garage_thermo_chk</name><parent>38</parent><if><and /><status id="CLIMD" node="50 59 A7 1" op="ISNOT"><val uom="98" prec="0">0</val></status><and /><status id="CLIMD" node="50 59 A7 1" op="ISNOT"><val uom="98" prec="0">1</val></status></if><then><cmd id="CLIMD" node="50 59 A7 1"><p id=""><val uom="98" prec="0">1</val></p></cmd></then><else></else><comment>Garage thermostat randomly changes to Cool mode. Only allowable modes should be Heat or Off. &#x0A;If the thermostat is no set to off and is set to anything other than Heat, switch the mode to heat.</comment></trigger></d2d><d2d><trigger><id>24</id><name>Warm Up</name><parent>1</parent><if></if><then><cmd id="CLISPH" node="44 87 96 1"><p id=""><val uom="14" prec="0">70</val></p></cmd><wait><minutes>30</minutes></wait><cmd id="CLISPH" node="44 87 96 1"><p id=""><val uom="14" prec="0">68</val></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>36</id><name>LaundryFanDecrement</name><parent>1</parent><if><and /><control id="DOF" node="43 57 73 1" op="IS"></control></if><then><var id="1" type="2"><op>EQ</op><val prec="0">0</val></var></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>14</id><name>XMas Tree</name><parent>1</parent><if><and /><schedule><from><time>21600</time></from><to><time>79200</time></to></schedule></if><then><cmd id="DON" node="3F B8 3C 1"></cmd></then><else><cmd id="DOF" node="3F B8 3C 1"></cmd></else><comment></comment></trigger></d2d><d2d><trigger><id>21</id><name>Hot water morning on</name><parent>40</parent><if><and /><schedule><at><time>21600</time></at></schedule></if><then><var id="2" type="2"><op>ADD=</op><val prec="0">1</val></var><wait><hours>3</hours></wait><var id="2" type="2"><op>SUB=</op><val prec="0">1</val></var></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>11</id><name>Water_feature</name><parent>1</parent><if><and /><status id="ST" node="n010_temperature" op="GE"><val uom="17" prec="1">350</val></status><and /><status id="ST" node="n010_wind" op="LE"><val uom="48" prec="1">60</val></status><and /><status id="GV4" node="n004_winds" op="LT"><val uom="48" prec="0">8</val></status></if><then><cmd id="DON" node="46 59 B9 1"></cmd></then><else><cmd id="DOF" node="46 59 B9 1"></cmd></else><comment>When wind is less than 6mph, gusts are less than 8mph, and temperature is greater than 35 F water feature is ON, when any of the conditions are FALSE &#x0A;water feature is OFF.</comment></trigger></d2d><d2d><trigger><id>18</id><name>Vacation Start</name><parent>1</parent><if></if><then><enable>6</enable><enable>8</enable><enable>7</enable><enable>29</enable><cmd id="CLISPH" node="44 87 96 1"><p id=""><val uom="14" prec="0">60</val></p></cmd><disable>22</disable><disable>21</disable><cmd id="DOF" node="46 BF B1 2"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>39</id><name>HotWaterPump</name><parent>40</parent><if><and /><var id="2" type="2"><op>GT</op><val prec="0">0</val></var></if><then><cmd id="DON" node="46 BF B1 2"></cmd></then><else><cmd id="DOF" node="46 BF B1 2"></cmd></else><comment></comment></trigger></d2d><d2d><trigger><id>32</id><name>Master_cl_l_timer</name><parent>1</parent><if><and /><control id="DON" node="43 57 55 1" op="IS"></control></if><then><wait><minutes>20</minutes></wait><cmd id="DOF" node="43 57 55 1"></cmd></then><else></else><comment>Closet light time - Master left closet</comment></trigger></d2d><d2d><trigger><id>49</id><name>BackupLighting</name><parent>38</parent><if><and /><schedule><from><sunrise>1800</sunrise></from><to><sunset>-1800</sunset></to></schedule><and /><var id="5" type="2"><op>IS</op><val prec="0">1</val></var><and /><status id="GV6" node="n003_2662707" op="ISNOT"><val uom="25" prec="0">0</val></status></if><then><cmd id="DOF" node="27631"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>47</id><name>BackupConserveHeat</name><parent>38</parent><if><and /><status id="ST" node="n010_temperature" op="GT"><val uom="17" prec="1">600</val></status><and /><status id="GV6" node="n003_2662707" op="ISNOT"><val uom="25" prec="0">0</val></status></if><then><cmd id="CLIMD" node="44 87 96 1"><p id=""><val uom="98" prec="0">0</val></p></cmd></then><else></else><comment>When powerwall back up is active and temperature is over 60F turn heat off</comment></trigger></d2d><d2d><trigger><id>3</id><name>Master_shower_timer</name><parent>1</parent><if><and /><control id="DON" node="43 5A A 1" op="IS"></control></if><then><wait><minutes>30</minutes></wait><cmd id="DOF" node="4E DC 81 1"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>28</id><name>Garage_heat_off</name><parent>38</parent><if><and /><status id="GV6" node="n003_2662707" op="ISNOT"><val uom="25" prec="0">0</val></status><and /><status id="ST" node="n010_temperature" op="GE"><val uom="17" prec="1">650</val></status></if><then><cmd id="CLIMD" node="50 59 A7 1"><p id=""><val uom="98" prec="0">0</val></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>4</id><name>Master_shower_link</name><parent>1</parent><if><and /><status id="ST" node="38 AC 2B 1" op="IS"><val uom="51" prec="0">0</val></status></if><then><cmd id="DOF" node="4E DC 81 1"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>29</id><name>Vacation Late Night</name><parent>37</parent><if><and /><schedule><at><time>85620</time></at></schedule></if><then><runif>30</runif><wait><minutes>2</minutes><random /></wait><cmd id="DOF" node="38 8C 44 1"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>33</id><name>Master_cl_r_timer</name><parent>1</parent><if><and /><control id="DON" node="43 5A A 1" op="IS"></control></if><then><wait><minutes>20</minutes></wait><cmd id="DOF" node="43 5A A 1"></cmd></then><else></else><comment>Closet light time - Master right closet</comment></trigger></d2d><d2d><trigger><id>38</id><name>Powerwall</name><parent>1</parent><folder /><if></if><then></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>40</id><name>HotWater</name><parent>1</parent><folder /><if></if><then></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>19</id><name>Vacation End</name><parent>1</parent><if></if><then><cmd id="CLISPH" node="44 87 96 1"><p id=""><val uom="14" prec="0">69</val></p></cmd><disable>8</disable><disable>6</disable><disable>7</disable><disable>29</disable><enable>21</enable><enable>22</enable></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>12</id><name>Front_eve_on</name><parent>1</parent><if><and /><schedule><at><sunset>-1200</sunset></at></schedule></if><then><cmd id="DON" node="53285"></cmd><cmd id="DON" node="4527"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>20</id><name>HeatChkGarage</name><parent>38</parent><if><and /><status id="CLIMD" node="50 59 A7 1" op="IS"><val uom="98" prec="0">1</val></status><and /><status id="GV6" node="n003_2662707" op="IS"><val uom="25" prec="0">0</val></status></if><then><var id="1" type="1"><op>EQ</op><val prec="0">1</val></var></then><else><var id="1" type="1"><op>EQ</op><val prec="0">0</val></var></else><comment></comment></trigger></d2d><d2d><trigger><id>13</id><name>Front_eve_off</name><parent>1</parent><if><and /><schedule><at><time>79200</time></at></schedule></if><then><cmd id="DOF" node="53285"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>30</id><name>Night</name><parent>1</parent><if></if><then><cmd id="PAUSE" node="n002_d4beecc"></cmd><cmd id="PAUSE" node="n002_d4bee9e"></cmd><cmd id="PAUSE" node="n002_bd55f2a"></cmd><cmd id="PAUSE" node="n002_e6ac0bc"></cmd><cmd id="DON" node="3C F0 EC 1"><p id=""><val uom="51" prec="0">20</val></p></cmd><cmd id="DON" node="3C FE 70 1"><p id=""><val uom="51" prec="0">20</val></p></cmd><cmd id="DOF" node="26259"></cmd><cmd id="DOF" node="48080"></cmd><wait><seconds>30</seconds></wait><cmd id="DOF" node="50425"></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>5</id><name>Master_bath_morning</name><parent>1</parent><if><and /><schedule><at><time>28800</time></at></schedule></if><then><cmd id="OL" node="38 AC 2B 1"><p id=""><val uom="51" prec="0">78</val></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>27</id><name>HeatChkMain</name><parent>38</parent><if></if><then><var id="3" type="1"><op>EQ</op><status id="CLIMD" node="44 87 96 1" uom="98"/></var><var id="4" type="1"><op>EQ</op><status id="CLISPH" node="44 87 96 1" uom="14"/></var></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>2</id><name>Master_bath_night</name><parent>1</parent><if><and /><schedule><at><time>75600</time></at></schedule></if><then><cmd id="OL" node="38 AC 2B 1"><p id=""><val uom="51" prec="0">33</val></p></cmd></then><else></else><comment></comment></trigger></d2d><d2d><trigger><id>48</id><name>BackupHeat</name><parent>38</parent><if><and /><status id="ST" node="n010_temperature" op="LE"><val uom="17" prec="1">600</val></status><and /><status id="GV6" node="n003_2662707" op="ISNOT"><val uom="25" prec="0">0</val></status></if><then><cmd id="CLIMD" node="44 87 96 1"><p id=""><val uom="98" prec="0">1</val></p></cmd><cmd id="CLISPH" node="44 87 96 1"><p id=""><val uom="14" prec="0">60</val></p></cmd></then><else></else><comment>If powerwall backup is active and temperature is 60F or less set the heat to 60</comment></trigger></d2d></triggers>